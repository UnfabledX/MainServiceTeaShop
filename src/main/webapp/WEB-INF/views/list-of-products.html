<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>List Of Products</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
    <style>
        table, th, td {
            border: solid 1px black;
            border-collapse: collapse;
        }

        th, td {
            padding: 5px;
        }
    </style>
</head>
<body>
<div th:replace="~{utils/header :: header-list-of-products}"></div>
<br/><br/>
<table>
    <thead>
    <tr>
        <th><a th:text="#{label.name}"
               th:href="@{'/allProducts?page=' + ${currentPage} + '&sort=name&dir=' + ${reverseSortDir}}">name</a>
        </th>
        <th><a th:text="#{label.description}"
               th:href="@{'/allProducts?page=' + ${currentPage} + '&sort=description&dir=' + ${reverseSortDir}}">description</a>
        </th>
        <th><a th:text="#{label.priceUA}"
               th:href="@{'/allProducts?page=' + ${currentPage} + '&sort=priceUA&dir=' + ${reverseSortDir}}">price
            UAH</a>
        </th>
        <th><a th:text="#{label.priceEU}"
               th:href="@{'/allProducts?page=' + ${currentPage} + '&sort=priceEU&dir=' + ${reverseSortDir}}">price
            EURO</a>
        </th>
        <th th:text="#{label.image}">image id</th>
        <th th:text="#{delete.product}">Delete Product</th>
        <th th:text="#{update.product}">Update Product</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="product: ${products}">
        <td th:text="${product.name}"/>
        <td th:text="${product.description}"/>
        <td th:text="${product.priceUA}"/>
        <td th:text="${product.priceEU}"/>
        <td th:text="${product.imageId}"/>
        <td><a th:href="@{'/delete/' + ${product.id}}"
               th:text="#{delete.product}" role="button"
               onclick="if(!confirm('Are you sure you want to delete this item?')) return false">Delete</a></td>
        <td><a th:href="@{'/edit/' + ${product.id} + '?page=' + ${currentPage}}"
               th:text="#{update.product}" role="button">Update</a></td>
    </tr>
    </tbody>
</table>
<br/>
<!-- pagination-list-of-product-->
<div th:if="${totalPages > 1}">
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            <li class="page-item">
                <a class="page-link" th:text="#{pagination.total.rows} + ' ' + ${totalItems}"></a>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${currentPage > 1}" th:text="#{pagination.first}"
                   th:href="@{'/allProducts?page=1&sort=' + ${sortField} + '&dir=' + ${sortDir}}">First</a>
                <span class="page-link" th:unless="${currentPage > 1}" th:text="#{pagination.first}"
                      style="color: black">First</span>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${currentPage > 1}"
                   th:href="@{'/allProducts?page=' + ${currentPage - 1} + '&sort=' + ${sortField} + '&dir=' + ${sortDir}}"
                   th:text="#{pagination.previous}">Previous</a>
                <span class="page-link" th:unless="${currentPage > 1}" th:text="#{pagination.previous}"
                      style="color: black">Previous</span>
            </li>
            <li class="page-item" th:each="i : ${#numbers.sequence(1, 5)}"
                th:if="${(currentPage >= 4 - i) && (totalPages >= currentPage + i - 3)}">
                <a class="page-link" th:if="${i != 3}"
                   th:href="@{'/allProducts?page=' + ${currentPage + i - 3} + '&sort=' + ${sortField} + '&dir=' + ${sortDir}}">
                    [[${currentPage + i - 3}]]</a>
                <span class="page-link" th:unless="${i != 3}" style="color: black">[[${currentPage + i - 3}]]</span>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${currentPage < totalPages}"
                   th:href="@{'/allProducts?page=' + ${currentPage + 1} + '&sort=' + ${sortField} + '&dir=' + ${sortDir}}"
                th:text="#{pagination.next}">Next</a>
                <span class="page-link" th:unless="${currentPage < totalPages}" th:text="#{pagination.next}"
                      style="color: black">Next</span>
            </li>
            <li class="page-item">
                <a class="page-link" th:if="${currentPage < totalPages}" th:text="#{pagination.last}"
                   th:href="@{'/allProducts?page=' + ${totalPages} + '&sort=' + ${sortField} + '&dir=' + ${sortDir}}">Last</a>
                <span class="page-link" th:unless="${currentPage < totalPages}" th:text="#{pagination.last}"
                      style="color: black">Last</span>
            </li>
        </ul>
    </nav>
</div>
<!-- pagination-list-of-product-->
<div>
    <a class="btn btn-outline-secondary" role="button" href="#" th:href="@{/product}" th:text="#{add.product}"></a>&nbsp;&nbsp;&nbsp;
    <a class="btn btn-outline-secondary" role="button" href="#" th:href="@{/adminPanel}" th:text="#{return.admin.panel}">Return to admin panel</a>&nbsp;&nbsp;&nbsp;
    <a class="btn btn-outline-secondary" role="button" href="#" th:href="@{/}" th:text="#{main.page}"></a>
</div>
<!-- Modal for header when logout-->
<div th:replace="~{utils/modal-for-logout :: modal-logout}"></div>
<!-- Modal for header when logout-->
</body>
</html>